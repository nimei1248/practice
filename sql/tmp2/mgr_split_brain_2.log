重新测试第2遍：

[root@ph180svr052037 10.180.52.37 2019-08-18_17:54:00_7_CST /root]
# systemctl start iptables 

[57492 80 sys@127.0.0.1 10.180.52.37:3316 2019-08-18_17:54:09_7_CST (db1)]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 3cfe5330-b2bb-11e9-9d5c-fa163e17c322 | 10.180.52.37 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | UNREACHABLE  | PRIMARY     | 8.0.17         |
| group_replication_applier | 9e3b5773-b2b8-11e9-be32-fa163e8abbc3 | 10.180.52.36 |        3316 | UNREACHABLE  | PRIMARY     | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
3 rows in set (0.00 sec)

[107693 98 sys@127.0.0.1 10.180.52.36:3316 2019-08-18_17:55:30_7_CST (db1)]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 3cfe5330-b2bb-11e9-9d5c-fa163e17c322 | 10.180.52.37 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 9e3b5773-b2b8-11e9-be32-fa163e8abbc3 | 10.180.52.36 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
3 rows in set (0.00 sec)

[49374 40 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_17:55:29_7_CST ((none))]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 3cfe5330-b2bb-11e9-9d5c-fa163e17c322 | 10.180.52.37 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 9e3b5773-b2b8-11e9-be32-fa163e8abbc3 | 10.180.52.36 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
3 rows in set (0.00 sec)



此时52.37状态显示是可写的：
[57492 81 sys@127.0.0.1 10.180.52.37:3316 2019-08-18_17:54:15_7_CST (db1)]
SQL> select @@super_read_only,@@read_only;
+-------------------+-------------+
| @@super_read_only | @@read_only |
+-------------------+-------------+
|                 0 |           0 |
+-------------------+-------------+
1 row in set (0.00 sec)


[57492 82 sys@127.0.0.1 10.180.52.37:3316 2019-08-18_17:54:18_7_CST (db1)]
SQL> insert into t1 set name='xxxxxxxxxxxxxx';  

关闭iptbles：
[root@ph180svr052037 10.180.52.37 2019-08-18_17:54:02_7_CST /root]
# systemctl stop iptables 

[57492 82 sys@127.0.0.1 10.180.52.37:3316 2019-08-18_17:54:18_7_CST (db1)]
SQL> insert into t1 set name='xxxxxxxxxxxxxx';   





Query OK, 1 row affected (1 min 21.52 sec)  


发现 52.36 52.37重新组合了：
[107693 100 sys@127.0.0.1 10.180.52.36:3316 2019-08-18_17:55:31_7_CST (db1)]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 3cfe5330-b2bb-11e9-9d5c-fa163e17c322 | 10.180.52.37 |        3316 | ONLINE      | PRIMARY    | 8.0.17        |
| group_replication_applier | 9e3b5773-b2b8-11e9-be32-fa163e8abbc3 | 10.180.52.36 |        3316 | ONLINE      | PRIMARY    | 8.0.17        |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
2 rows in set (0.00 sec)

[107693 100 sys@127.0.0.1 10.180.52.36:3316 2019-08-18_17:55:31_7_CST (db1)]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 3cfe5330-b2bb-11e9-9d5c-fa163e17c322 | 10.180.52.37 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 9e3b5773-b2b8-11e9-be32-fa163e8abbc3 | 10.180.52.36 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
2 rows in set (0.00 sec)


52.35 ERROR：
[49374 42 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_17:57:03_7_CST ((none))]
SQL> select * from performance_schema.replication_group_members;
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    49385
Current database: *** NONE ***

+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | ERROR        |             | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
1 row in set (0.00 sec)

[49385 43 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_17:57:04_7_CST ((none))]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | ERROR        |             | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
1 row in set (0.00 sec)



日志：
52.37：
2019-08-18T17:55:45.642482+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 0 host 10.180.52.36'
2019-08-18T17:55:45.642623+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 1 host 10.180.52.37'
2019-08-18T17:55:45.642665+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Installed site start={4d25d554 1770894 0} boot_key={4d25d554 1770883 0} event_horizon=10 node 1'
2019-08-18T17:55:45.642864+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 0 host 10.180.52.36'
2019-08-18T17:55:45.642904+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 1 host 10.180.52.37'
2019-08-18T17:55:45.642928+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Installed site start={4d25d554 1770894 0} boot_key={4d25d554 1770883 1} event_horizon=10 node 1'
2019-08-18T17:55:46.138061+08:00 0 [Warning] [MY-011494] [Repl] Plugin group_replication reported: 'Member with address 10.180.52.36:3316 is reachable again.'
2019-08-18T17:55:46.138172+08:00 0 [Warning] [MY-011498] [Repl] Plugin group_replication reported: 'The member has resumed contact with a majority of the members in the group. Regular operation is restored and transactions are unblocked.'
2019-08-18T17:55:47.141686+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Group is able to support up to communication protocol version 8.0.16'
2019-08-18T17:55:47.141844+08:00 0 [Warning] [MY-011499] [Repl] Plugin group_replication reported: 'Members removed from the group: 10.180.52.35:3316'
2019-08-18T17:55:47.142011+08:00 0 [Note] [MY-011503] [Repl] Plugin group_replication reported: 'Group membership changed to 10.180.52.37:3316, 10.180.52.36:3316 on view 15649859521903311:30.'
2019-08-18T17:55:48.653192+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Failure reading from fd=54 n=0'
2019-08-18T17:55:48.654566+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Node has already been removed: 10.180.52.35:33161 15656803819073150.'


52.36：
2019-08-18T17:54:18.106088+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 0 host 10.180.52.36'
2019-08-18T17:54:18.106273+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 1 host 10.180.52.37'
2019-08-18T17:54:18.106345+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Installed site start={4d25d554 1770894 0} boot_key={4d25d554 1770883 0} event_horizon=10 node 0'
2019-08-18T17:54:18.106500+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 0 host 10.180.52.36'
2019-08-18T17:54:18.106570+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 1 host 10.180.52.37'
2019-08-18T17:54:18.106693+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Installed site start={4d25d554 1770894 0} boot_key={4d25d554 1770883 1} event_horizon=10 node 0'
2019-08-18T17:54:29.020394+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Failure reading from fd=-1 n=18446744073709551615'
2019-08-18T17:55:43.254766+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Group is able to support up to communication protocol version 8.0.16'
2019-08-18T17:55:43.255003+08:00 0 [Warning] [MY-011499] [Repl] Plugin group_replication reported: 'Members removed from the group: 10.180.52.35:3316'
2019-08-18T17:55:43.255179+08:00 0 [Note] [MY-011503] [Repl] Plugin group_replication reported: 'Group membership changed to 10.180.52.37:3316, 10.180.52.36:3316 on view 15649859521903311:30.'
2019-08-18T17:55:44.766087+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Failure reading from fd=61 n=0'


52.35：
2019-08-18T17:54:34.707800+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 0 host 10.180.52.36'
2019-08-18T17:54:34.707891+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 1 host 10.180.52.37'
2019-08-18T17:54:34.707922+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Installed site start={4d25d554 1770894 0} boot_key={4d25d554 1770883 0} event_horizon=10 node 4294967295'
2019-08-18T17:54:34.708040+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 0 host 10.180.52.36'
2019-08-18T17:54:34.708095+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Re-using server node 1 host 10.180.52.37'
2019-08-18T17:54:34.708118+08:00 0 [Note] [MY-011735] [Repl] Plugin group_replication reported: '[GCS] Installed site start={4d25d554 1770894 0} boot_key={4d25d554 1770883 1} event_horizon=10 node 4294967295'



52.35重新加入MGR：
[49385 44 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_17:57:09_7_CST ((none))]
SQL> stop group_replication;
ERROR 2013 (HY000): Lost connection to MySQL server during query

[49385 45 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_18:02:33_7_CST ((none))]
SQL> stop group_replication;
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    49391
Current database: *** NONE ***

Query OK, 0 rows affected (1.02 sec)

[49391 46 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_18:02:36_7_CST ((none))]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | OFFLINE      |             |                |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
1 row in set (0.00 sec)

[49391 47 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_18:02:38_7_CST ((none))]
SQL> start group_replication;                                  
Query OK, 0 rows affected (4.58 sec)

[49391 48 sys@127.0.0.1 10.180.52.35:3316 2019-08-18_18:02:57_7_CST ((none))]
SQL> select * from performance_schema.replication_group_members;
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| CHANNEL_NAME              | MEMBER_ID                            | MEMBER_HOST  | MEMBER_PORT | MEMBER_STATE | MEMBER_ROLE | MEMBER_VERSION |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
| group_replication_applier | 3cfe5330-b2bb-11e9-9d5c-fa163e17c322 | 10.180.52.37 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 417ceb5a-b2b3-11e9-99ce-fa163e73cb8f | 10.180.52.35 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
| group_replication_applier | 9e3b5773-b2b8-11e9-be32-fa163e8abbc3 | 10.180.52.36 |        3316 | ONLINE       | PRIMARY     | 8.0.17         |
+---------------------------+--------------------------------------+--------------+-------------+--------------+-------------+----------------+
3 rows in set (0.00 sec)







